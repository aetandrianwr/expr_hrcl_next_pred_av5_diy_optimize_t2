# DIY Dataset - Ultra-Optimized History-First Model
# Target: >=70% Acc@1 with aggressive history bias

experiment:
  name: "diy_ultra_history"
  description: "Ultra-optimized history-first model exploiting 83% history pattern"
  dataset: "diy_skip_first_part"
  version: "4.0"

data:
  dataset_name: "diy_skip_first_part"
  data_dir: "data/diy_skip_first_part"
  train_file: "diy_skip_first_part_transformer_7_train.pk"
  val_file: "diy_skip_first_part_transformer_7_validation.pk"
  test_file: "diy_skip_first_part_transformer_7_test.pk"
  
  num_locations: 7038
  num_users: 693
  num_weekdays: 7
  max_seq_len: 60

model:
  name: "UltraOptimizedHistoryModel"

training:
  batch_size: 128
  num_epochs: 250
  learning_rate: 0.002
  weight_decay: 0.0002
  grad_clip: 1.0
  label_smoothing: 0.1
  
  optimizer: "adamw"
  betas: [0.9, 0.999]
  eps: 1.0e-8
  
  scheduler:
    type: "cosine_annealing"
    patience: 20
    factor: 0.5
    min_lr: 1.0e-7
    warmup_epochs: 8
    T_max: 50
  
  early_stopping:
    patience: 40
    metric: "val_loss"
    mode: "min"

evaluation:
  metrics: ["acc@1", "acc@3", "acc@5", "acc@10", "mrr", "ndcg", "f1"]
  save_predictions: false
  
system:
  device: "auto"
  num_workers: 4
  pin_memory: true
  seed: 42
  deterministic: true
  
logging:
  log_interval: 50
  verbose: true
  wandb:
    enabled: false
    project: "next-location-prediction"
    entity: null
  
checkpoint:
  save_best: true
  save_last: true
  monitor: "val_loss"
  mode: "min"

paths:
  runs_dir: "runs"
  results_dir: "results"
  checkpoints_dir: "results/checkpoints"
  logs_dir: "results/logs"
  predictions_dir: "results/predictions"
